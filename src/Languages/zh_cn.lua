local language = {
    ["Path of Building"] = "流派构造之路",
    ["Current build"] = "当前流派",
    ["Unnamed build"] = "新流派",
    ["Options"] = "选项",
    ["Save"] = "保存",
    ["Save As"] = "另存为",
    ["Edit Item Text"] = "修改物品文本",
    ["Create Custom Item from Text"] = "从文本生成自定义物品",
    ["Cancel"] = "取消",
    ["Imported Build"] = "导入流派",
    ["About"] = "关于",
    ["Skills"] = "技能",
    ["Reset"] = "重置",
    ["Tree"] = "天赋树",
    ["Items"] = "物品",
    ["Notes"] = "笔记",
    ["Configuration"] = "配置",
    ["General"] = "常规",
    ["Compare"] = "比较",
    ["Import/Export Build"] = "导入/导出",
    ["Calcs"] = "计算",
    ["Party"] = "队伍",
    ["Auto"] = "自动",
    ["Manual"] = "手动",
    ["Main Skill"] = "核心技能",
    ["Level"] = "等级",
    ["Required Level"] = "要求等级",
    ["Act"] = "章节",
    ["Application option"] = "应用选项",
    ["Red & Blue"] = "红 & 蓝",
    ["Red & Green"] = "红 & 绿",
    ["Green & Blue"] = "绿 & 蓝",
    ["<< Back"] = "返回",
    ["Manage Spectres"] = "灵体管理",
    ["Check for Update"] = "检查更新",
    ["Active Minion Limit"] = "Active Minion Limit",
    ["Average Hit"] = "Average Hit",
    ["PvP Average Hit"] = "PvP Average Hit",
    ["Average Damage"] = "Average Damage",
    ["Average Burst Damage"] = "Average Burst Damage",
    ["PvP Average Damage"] = "PvP Average Damage",
    ["Attack Rate"] = "攻击范围",
    ["Cast Rate"] = "施法范围",
    ["Effective Trigger Rate"] = "有效触发范围",
    ["Cast Time"] = "施法时间",
    ["Hit Rate"] = "Hit Rate",
    ["Channel Time"] = "Channel Time",
    ["Trap Throwing Time"] = "Trap Throwing Time",
    ["Trap Cooldown"] = "Trap 冷却",
    ["Mine Throwing Time"] = "Mine Throwing Time",
    ["Totem Placement Time"] = "图腾 Placement Time",
    ["Crit Chance"] = "Crit Chance",
    ["Effective Crit Chance"] = "Effective Crit Chance",
    ["Crit Multiplier"] = "Crit Multiplier",
    ["Hit Chance"] = "Hit Chance",
    ["Hit DPS"] = "Hit DPS",
    ["PvP Hit DPS"] = "PvP Hit DPS",
    ["DoT DPS"] = "持续伤害 DPS",
    ["Total DPS inc. DoT"] = "Total DPS inc. DoT",
    ["Bleed DPS"] = "Bleed DPS",
    ["Corrupting Blood DPS"] = "Corrupting Blood DPS",
    ["Total Damage per Bleed"] = "Total Damage per Bleed",
    ["Total DPS inc. Bleed"] = "Total DPS inc. Bleed",
    ["Ignite DPS"] = "Ignite DPS",
    ["Total Damage per Ignite"] = "Total Damage per Ignite",
    ["Burning Ground DPS"] = "燃烧地面 DPS",
    ["Mirage Burning Ground DPS"] = "Mirage 燃烧地面 DPS",
    ["Total DPS inc. Ignite"] = "Total DPS inc. Ignite",
    ["Average Dmg. inc. Ignite"] = "平均 Dmg. inc. Ignite",
    ["Poison DPS"] = "Poison DPS",
    ["Caustic Ground DPS"] = "Caustic Ground DPS",
    ["Mirage Caustic Ground DPS"] = "Mirage Caustic Ground DPS",
    ["Total Damage per Poison"] = "Total Damage per Poison",
    ["Total DPS inc. Poison"] = "Total DPS inc. Poison",
    ["Decay DPS"] = "Decay DPS",
    ["Total DoT DPS"] = "Total DoT DPS",
    ["Impale Damage"] = "Impale Damage",
    ["Damage inc. Impale"] = "Damage inc. Impale",
    ["Impale DPS"] = "Impale DPS",
    ["Total DPS inc. Impale"] = "Total DPS inc. Impale",
    ["Total Mirage DPS"] = "Total Mirage DPS",
    ["Culling DPS"] = "Culling DPS",
    ["Reservation DPS"] = "Reservation DPS",
    ["Combined DPS"] = "Combined DPS",
    ["Combined Total Damage"] = "Combined Total Damage",
    ["Total Explode Chance"] = "Total Explode Chance",
    ["Enemy Life Equivalent"] = "Enemy Life Equivalent",
    ["Skill Cooldown"] = "技能冷却",
    ["Seal Gain Frequency"] = "Seal Gain Frequency",
    ["Max Number of Seals"] = "最大 Seals 数量",
    ["Time to Gain Max Seals"] = "Time to Gain Max Seals",
    ["AoE Radius"] = "AoE Radius",
    ["Attachment Range"] = "Attachment Range",
    ["Activations per Brand"] = "Activations per Brand",
    ["Mana Cost"] = "Mana Cost",
    ["Mana Cost per second"] = "Mana Cost per second",
    ["Life Cost"] = "Life Cost",
    ["Life Cost per second"] = "Life Cost per second",
    ["Energy Shield Cost"] = "Energy Shield Cost",
    ["ES Cost per second"] = "ES Cost per second",
    ["Rage Cost"] = "Rage Cost",
    ["Rage Cost per second"] = "Rage Cost per second",
    ["Soul Cost"] = "Soul Cost",
    ["Strength"] = "力量",
    ["Strength Required"] = "力量要求",
    ["Dexterity"] = "敏捷",
    ["Dexterity Required"] = "敏捷要求",
    ["Intelligence"] = "智慧",
    ["Intelligence Required"] = "智慧要求",
    ["Omniscience"] = "Omniscience",
    ["Omniscience Required"] = "Omniscience Required",
    ["Devotion"] = "Devotion",
    ["Effective Hit Pool"] = "Effective Hit Pool",
    ["PvP Hit Taken"] = "PvP Hit Taken",
    ["Phys Max Hit"] = "物理击中可承受值",
    ["Elemental Max Hit"] = "元素击中可承受值",
    ["Fire Max Hit"] = "火焰击中可承受值",
    ["Cold Max Hit"] = "冰霜击中可承受值",
    ["Lightning Max Hit"] = "闪电击中可承受值",
    ["Chaos Max Hit"] = "混沌击中可承受值",
    ["MH Accuracy"] = "MH Accuracy",
    ["OH Accuracy"] = "OH Accuracy",
    ["Total Life"] = "总生命值",
    ["%Inc Life from Tree"] = "天赋生命加成",
    ["Unreserved Life"] = "未保留生命值",
    ["Life Recoverable"] = "保留生命值",
    ["Life Regen"] = "Life Regen",
    ["Life Recovery"] = "Life Recovery",
    ["Life Leech/On Hit Rate"] = "Life Leech/On Hit Rate",
    ["Life Leech/Gain per Hit"] = "Life Leech/Gain per Hit",
    ["Total Mana"] = "总魔力值",
    ["%Inc Mana from Tree"] = "天赋魔力加成",
    ["Unreserved Mana"] = "未保留魔力值",
    ["Mana Regen"] = "Mana Regen",
    ["Mana Recovery"] = "Mana Recovery",
    ["Mana Leech/On Hit Rate"] = "Mana Leech/On Hit Rate",
    ["Mana Leech/Gain per Hit"] = "Mana Leech/Gain per Hit",
    ["Energy Shield"] = "能量护盾",
    ["Recoverable ES"] = "Recoverable ES",
    ["%Inc ES from Tree"] = "天赋护盾加成",
    ["ES Regen"] = "ES Regen",
    ["ES Recovery"] = "ES Recovery",
    ["ES Leech/On Hit Rate"] = "ES Leech/On Hit Rate",
    ["ES Leech/Gain per Hit"] = "ES Leech/Gain per Hit",
    ["Ward"] = "Ward",
    ["Rage"] = "Rage",
    ["Rage Regen"] = "Rage Regen",
    ["Total Degen"] = "Total Degen",
    ["Total Net Recovery"] = "Total Net Recovery",
    ["Net Life Recovery"] = "Net Life Recovery",
    ["Net Mana Recovery"] = "Net Mana Recovery",
    ["Net ES Recovery"] = "Net ES Recovery",
    ["Evasion rating"] = "闪避值",
    ["%Inc Evasion from Tree"] = "天赋闪避加成",
    ["Evade Chance"] = "Evade Chance",
    ["Melee Evade Chance"] = "Melee Evade Chance",
    ["Projectile Evade Chance"] = "Projectile Evade Chance",
    ["Armour"] = "护甲",
    ["%Inc Armour from Tree"] = "天赋护甲加成",
    ["Phys. Damage Reduction"] = "物理伤害减免",
    ["Block Chance"] = "攻击格挡",
    ["Spell Block Chance"] = "法术格挡",
    ["Attack Dodge Chance"] = "Attack Dodge Chance",
    ["Spell Dodge Chance"] = "Spell Dodge Chance",
    ["Spell Suppression Chance"] = "法术压制率",
    ["Fire Resistance"] = "火焰抗性",
    ["Fire Res. Over Max"] = "最大火焰抗性",
    ["Cold Resistance"] = "冰霜抗性",
    ["Cold Res. Over D"] = "最大冰霜抗性",
    ["Lightning Resistance"] = "闪电抗性",
    ["Lightning Res. Over Max"] = "最大闪电抗性",
    ["Chaos Resistance"] = "混沌抗性",
    ["Chaos Res. Over Max"] = "最大混沌抗性",
    ["Movement Speed Modifier"] = "移动速度修正",
    ["Full DPS"] = "Full DPS",
    ["Full Dot DPS"] = "Full Dot DPS",
    ["Skill DPS"] = "Skill DPS",
    ["Attack/Cast Rate"] = "攻击/施法距离",
    ["Physical Damage"] = "物理伤害",
    ["View Skill Details"] = "技能详情",
    ["Socket Group"] = "插槽组",
    ["Active Skill"] = "当前技能",
    ["Calculation Mode"] = "计算模式",
    ["Aura and Buff Skills"] = "光环和增益技能",
    ["Flask"] = "药剂",
    ["Flasks"] = "药剂",
    ["Utility Flasks"] = "功能药剂",
    ["Life Flasks"] = "生命药剂",
    ["Mana Flasks"] = "魔力药剂",
    ["Lightning"] = "闪电",
    ["Physical"] = "物理",
    ["Cold"] = "冰霜",
    ["Fire"] = "火焰",
    ["Chaos"] = "混沌",
    ["Total More"] = "总增",
    ["Total"] = "总计",
    ["Total Increased"] = "增加",
    ["Base from Armours"] = "来自护甲",
    ["Global Base"] = "基础值",
    ["Life"] = "生命",
    ["Mana"] = "魔力",
    ["Other Effects"] = "其它影响",
    ["Reserved"] = "保留",
    ["Unreserved"] = "未保留",
    ["<No skills added yet>"] = "<未装配技能>",
    ["Resistance penalty"] = "抗性 penalty",
    ["Major God"] = "大神",
    ["Minor God"] = "小神",
    ["Map Tier"] = "地图阶层",
    ["Red"] = "红",
    ["Yellow"] = "黄",
    ["White"] = "白",
    ["Prefix"] = "前缀",
    ["Suffix"] = "后缀",
    ["Enemy Level"] = "怪物等级",
    ["Is the enemy a Boss?"] = "是BOSS吗？",
    ["Show All Configurations"] = "显示所有配置项",
    ["Search"] = "搜索",
    ["Default"] = "默认",
    ["Socket Groups"] = "插槽组",
    ["New"] = "新增",
    ["Manage"] = "管理",
    ["Gem Options"] = "宝石配置",
    ["Equipped items"] = "已装备的物品",
    ["Weapon 1"] = "武器 1",
    ["Weapon 2"] = "武器 2",
    ["Weapon Set"] = "武器选择",
    ["Body Armour"] = "胸甲",
    ["Gloves"] = "手套",
    ["Boots"] = "鞋子",
    ["Helmet"] = "头盔",
    ["Amulet"] = "项链",
    ["Ring"] = "戒指",
    ["Belt"] = "腰带",
    ["Jewel"] = "珠宝",
    ["Ring 1"] = "戒指 1",
    ["Ring 2"] = "戒指 2",
    ["Flask 1"] = "药剂 1",
    ["Flask 2"] = "药剂 2",
    ["Flask 3"] = "药剂 3",
    ["Flask 4"] = "药剂 4",
    ["Flask 5"] = "药剂 5",
    ["All items"] = "所有物品",
    ["Average"] = "平均",
    ["Sort"] = "排序",
    ["Passive tree"] = "天赋树",
    ["Anywhere"] = "任意",
    ["Names"] = "名称",
    ["Modifiers"] = "词缀",
    ["Any type"] = "任意类别",
    ["Any requirements"] = "任意要求",
    ["Current level"] = "当前等级",
    ["Any slot"] = "任意位置",
    ["Create custom"] = "自定义添加",
    ["Delete"] = '删除',
    ["Delete All"] = '清空',
    ["Socketed in"] = '插槽来自',
    ["Enabled"] = '启用',
    ["Quality"] = '质量',
    ["Label"] = '名称',
    ["Skill set"] = '技能配置'
}
-- https://www.pathofexile.com/api/trade/data/stats
-- https://www.pathofexile.com/api/trade/data/static
-- https://www.pathofexile.com/api/trade/data/items
local function translate(key)
    return language[key] or key
end
local function transfer(text)
    local prefix = "";
    local suffix = "";
    if string.sub(text, -3, -1) == "..." then
        text = string.sub(text, 1, -4)
    end
    if string.sub(text, -1, -1) == ":" then
        text = string.sub(text, 1, -2)
        suffix = ":" .. suffix
    end
    if string.sub(text, -2, -1) == "^7" then
        text = string.sub(text, 1, -3)
        suffix = "^7" .. suffix
    end
    if string.find(text, "^%^%d") then
        prefix = prefix .. string.sub(text, 1, 2)
        text = string.sub(text, 3)
    end
    if string.find(text, "^%^x%x%x%x%x%x%x") then
        prefix = prefix .. string.sub(text, 1, 8)
        text = string.sub(text, 9)
    end
    if string.sub(text, 1, 1) == "^" then
        prefix = prefix .. string.sub(text, 1, 2)
        text = string.sub(text, 3)
    end
    if string.sub(text, 1, string.len("Current build")) == "Current build" then
        prefix = translate("Current build")
        suffix = string.sub(text, string.len("Current build:") + 3)
        text = "："
        if suffix == "Unnamed build" then
            suffix = translate(suffix)
        end
    end
    return prefix .. translate(text) .. suffix
end
local DrawStringOriginal = DrawString
function DrawString(left, top, align, height, font, text)
    local info = debug.getinfo(2);
    if info.source == '@Modules/Build.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/TextListControl.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/ItemSlotControl.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/ListControl.lua' then
        if info.currentline == 179 then
            text = transfer(text)
        end
    elseif info.source == '@Classes/SectionControl.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/CalcSectionControl.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/PopupDialog.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/DropDownControl.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/CheckBoxControl.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/LabelControl.lua' then
        text = transfer(text)
    elseif info.source == '@Classes/ButtonControl.lua' then
        if debug.getinfo(4).source ~= '@Classes/PathControl.lua' then
            text = transfer(text)
        end
    elseif info.source == '@Classes/EditControl.lua' then
        if info.currentline == 273 or info.currentline == 275 or info.currentline == 295 then
            text = transfer(text)
        end
    end
    return DrawStringOriginal(left, top, align, height, font, text)
end
